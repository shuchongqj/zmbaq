v 20130925 2
B 41300 45500 8000 5200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
P 40300 47500 41300 47500 1 0 0
{
T 40300 47500 5 10 0 0 0 0 1
pintype=unknown
T 41355 47495 5 10 1 1 0 0 1
pin-rtsp-input=rtsp/h264
T 41205 47545 5 10 1 1 0 6 1
pinnumber=0
T 40300 47500 5 10 0 0 0 0 1
pinseq=0
}
P 40300 48500 41300 48500 1 0 0
{
T 40300 48500 5 10 0 0 0 0 1
pintype=unknown
T 41355 48495 5 10 1 1 0 0 1
pin-mjpeg-input=mjpeg
T 41205 48545 5 10 1 1 0 6 1
pinnumber=0
T 40300 48500 5 10 0 0 0 0 1
pinseq=0
}
P 40300 46400 41300 46400 1 0 0
{
T 40300 46400 5 10 0 0 0 0 1
pintype=unknown
T 41355 46395 5 10 1 1 0 0 1
pin-webcam-input=webcam YUV4:2:0/RGB24
T 41205 46445 5 10 1 1 0 6 1
pinnumber=0
T 40300 46400 5 10 0 0 0 0 1
pinseq=0
}
B 51000 45400 3900 5200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 51600 50400 9 10 1 0 0 0 1
zmbaq-GUI-client
T 43400 50500 9 10 1 0 0 0 1
CameraContext
C 50400 49600 1 0 0 in-1.sym
{
T 50400 49900 5 10 0 0 0 0 1
device=INPUT
T 50400 49900 5 10 1 1 0 0 1
refdes=mjpeg1/af_unix sock
}
C 54900 48500 1 0 0 output-2.sym
{
T 55800 48700 5 10 1 0 0 0 1
net=Qt5GUI
T 55100 49200 5 10 0 0 0 0 1
device=none
T 55800 48600 5 10 1 1 0 1 1
value=Disp. Widget1
}
B 52100 48100 2200 1400 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 52200 49300 9 10 1 0 0 0 1
mjpeg demuxer & decoder
C 52700 48300 1 0 0 4071-1.sym
{
T 53300 49000 5 10 0 1 0 0 1
device=4071
T 52250 49100 5 10 1 1 0 0 1
refdes=read-markers/UDP-unpacketize
T 53300 50400 5 10 0 0 0 0 1
footprint=DIP14
}
C 50400 47600 1 0 0 in-1.sym
{
T 50400 47900 5 10 0 0 0 0 1
device=INPUT
T 50400 47900 5 10 1 1 0 0 1
refdes=mjpeg1/UDP_socket
}
C 49200 48900 1 0 0 out-1.sym
{
T 49200 49200 5 10 0 0 0 0 1
device=OUTPUT
T 48200 49300 5 10 1 1 0 0 1
refdes=af_unix_server(mjpeg)
}
C 49200 48100 1 0 0 out-1.sym
{
T 49200 48400 5 10 0 0 0 0 1
device=OUTPUT
T 48700 48400 5 10 1 1 0 0 1
refdes=UDP(mjpeg packetized)
}
T 42100 44200 9 10 1 0 0 0 2
MediaProcessing Unit
(motion detection)
C 42300 47400 1 0 0 resistor-2.sym
{
T 42700 47750 5 10 0 0 0 0 1
device=RESISTOR
T 42500 47700 5 10 1 1 0 0 1
refdes=ffmpeg-H264-decoder
}
P 44100 49800 44400 49100 1 0 0
{
T 44100 49800 5 10 0 0 0 0 1
pintype=unknown
T 44055 50095 5 10 1 1 0 0 1
pinlabel=jpeg/raw frames
T 44100 49800 5 10 0 0 0 0 1
pinseq=0
}
C 42900 49400 1 0 0 combine-3.sym
N 43200 47500 43200 49000 4
N 43200 49000 42900 49600 4
N 41300 47500 42300 47500 4
N 41300 48500 42200 48500 4
N 42200 48500 42200 49400 4
N 42200 49400 42900 50000 4
N 41300 46400 43800 46400 4
N 43800 46400 43800 48300 4
N 43800 48300 42700 48300 4
N 42700 48300 42700 49200 4
N 42700 49200 42900 49800 4
C 44400 48000 1 0 0 resistor-2.sym
{
T 44800 48350 5 10 0 0 0 0 1
device=RESISTOR
T 44500 48400 5 10 1 1 0 0 1
refdes=mjpeg-encoder-ctx
}
C 47800 47400 1 0 0 resistor-2.sym
{
T 47600 47800 5 10 1 1 0 0 1
refdes=mjpeg-UDP-packetizer
T 48200 47750 5 10 0 0 0 0 1
device=RESISTOR
}
C 46500 48100 1 0 0 switch-spdt-1.sym
{
T 46900 48900 5 10 0 0 0 0 1
device=SPDT
T 46500 48700 5 10 1 1 0 0 1
refdes=af_unix/OR/UDP
}
N 44400 45200 44400 49500 4
N 45300 48100 46500 48300 4
N 47400 48500 47800 48800 4
N 47800 48800 49200 49000 4
N 47400 48100 47400 47900 4
N 47400 47900 47800 47500 4
N 48700 47500 48400 47600 4
N 48400 47600 48400 48200 4
N 48400 48200 49200 48200 4
N 51000 49700 51600 49700 4
N 51600 49700 51600 48800 4
N 51600 48800 52700 48800 4
N 51000 47700 51200 47700 4
N 51200 47700 51200 48400 4
N 51200 48400 52700 48400 4
N 53900 48600 54900 48600 4
T 47800 44000 9 10 1 0 0 0 2
Movement notifications
manager
T 57900 44900 9 10 1 0 0 0 8
DataBase
 (Notifications, Cameras settings)

[Camera1]
note1 ... noteN +-- path to file 1..N

[CameraN]
noteN ... noteNN +-- path to file 2..M
T 60500 39400 9 10 1 0 0 0 11
BulkFrameStorage
[Camera1]
chunk11
...
chunk1N
[Camera N]
chunkN1
...
chunkNN


T 55100 44300 9 10 1 0 0 0 1
FramesMuxer Ctx
T 45400 44700 9 10 1 0 0 0 2
Client Settings Manager
(ZeroMQ/TCP)
C 54900 47500 1 0 0 output-2.sym
{
T 55800 47700 5 10 1 0 0 0 1
net=OUTPUT:1
T 55100 48200 5 10 0 0 0 0 1
device=none
T 55800 47600 5 10 1 1 0 1 1
value=Notifications List
}
L 49900 49000 50300 49700 3 0 0 0 -1 -1
L 49900 48200 50400 47700 3 0 0 0 -1 -1
B 42000 42800 3200 1900 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
C 41400 43600 1 0 0 in-1.sym
{
T 41400 43900 5 10 0 0 0 0 1
device=INPUT
T 41000 44000 5 10 1 1 0 0 1
refdes=jpeg/fraw frame
}
C 42400 43600 1 0 0 resistor-2.sym
{
T 42800 43950 5 10 0 0 0 0 1
device=RESISTOR
T 42600 43900 5 10 1 1 0 0 1
refdes=algo: is moving?
}
C 43900 43600 1 0 0 switch-spdt-1.sym
{
T 44300 44400 5 10 0 0 0 0 1
device=SPDT
T 44300 44200 5 10 1 1 0 0 1
refdes=S?
}
P 45800 44200 45200 44200 1 0 0
{
T 45800 44200 5 10 0 0 0 0 1
pintype=unknown
T 45745 44295 5 10 1 1 0 6 1
pinlabel=case 'true'
T 45800 44200 5 10 0 0 0 0 1
pinseq=0
}
P 45800 43400 45200 43400 1 0 0
{
T 45800 43400 5 10 0 0 0 0 1
pintype=unknown
T 45845 43495 5 10 1 1 0 6 1
pinlabel=case 'false'
T 45800 43400 5 10 0 0 0 0 1
pinseq=0
}
N 40800 43700 42400 43700 4
N 43300 43700 43900 43700 4
N 43900 43700 43900 43800 4
L 44800 44000 45200 44200 3 0 0 0 -1 -1
L 44800 43600 45200 43400 3 0 0 0 -1 -1
B 47400 42900 2500 1700 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
P 46900 43700 47400 43700 1 0 0
{
T 46900 43700 5 10 0 0 0 0 1
pintype=unknown
T 47455 43695 5 10 1 1 0 0 1
pinlabel=[start] event rec.
T 47305 43745 5 10 1 1 0 6 1
pinnumber=0
T 46900 43700 5 10 0 0 0 0 1
pinseq=0
}
P 46900 43100 47400 43100 1 0 0
{
T 46900 43100 5 10 0 0 0 0 1
pintype=unknown
T 47455 43095 5 10 1 1 0 0 1
pinlabel=[stop] event rec.
T 47305 43145 5 10 1 1 0 6 1
pinnumber=0
T 46900 43100 5 10 0 0 0 0 1
pinseq=0
}
C 49900 43900 1 0 0 out-1.sym
{
T 49900 44200 5 10 0 0 0 0 1
device=OUTPUT
T 49800 44200 5 10 1 1 0 0 1
refdes=start time
}
C 49900 43100 1 0 0 out-1.sym
{
T 49800 43400 5 10 1 1 0 0 1
refdes=stop time
T 49900 43400 5 10 0 0 0 0 1
device=OUTPUT
}
B 54100 42100 3300 2100 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
B 55500 42300 1400 500 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 55600 42500 9 10 1 0 0 0 1
video chunk1
B 59900 39400 2600 2400 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
B 57700 43700 4500 3100 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
B 60400 40900 1100 300 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
C 56900 42400 1 0 0 resistor-1.sym
{
T 57200 42800 5 10 0 0 0 0 1
device=RESISTOR
T 57100 42700 5 10 1 1 0 0 1
refdes=copy
}
L 57800 42500 60400 41200 3 0 0 0 -1 -1
N 45800 44200 46900 44200 4
N 46900 44200 46900 43700 4
N 46900 43100 45800 43100 4
N 45800 43100 45800 43400 4
C 60900 45400 1 0 0 capacitor-1.sym
{
T 61100 46100 5 10 0 0 0 0 1
device=CAPACITOR
T 61100 45900 5 10 1 1 0 0 1
refdes=note & path linkage
T 61100 46300 5 10 0 0 0 0 1
symversion=0.1
}
B 59400 45400 1500 300 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
N 44400 45200 40800 45200 4
N 40800 45200 40800 43700 4
C 52700 43900 1 0 0 input-2.sym
{
T 52700 44100 5 10 1 0 0 0 1
net=INPUT:1
T 53300 44600 5 10 0 0 0 0 1
device=none
T 53200 44000 5 10 1 1 0 7 1
frame=H264 encoded
}
C 55600 43700 1 0 0 resistor-1.sym
{
T 55900 44100 5 10 0 0 0 0 1
device=RESISTOR
T 55800 44000 5 10 1 1 0 0 1
refdes=read
}
C 53900 42100 1 0 0 connector2-2.sym
{
T 55100 43400 5 10 1 1 0 6 1
refdes=event start/end
T 54200 43350 5 10 0 0 0 0 1
device=CONNECTOR_2
T 54200 43550 5 10 0 0 0 0 1
footprint=SIP2N
}
B 54900 44200 1800 400 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
N 49900 44000 51500 44000 4
N 51500 44000 51500 42900 4
N 51500 42900 53900 42900 4
N 49900 43200 50700 43200 4
N 50700 43200 50700 42500 4
N 50700 42500 53900 42500 4
N 54100 44000 55600 44000 4
N 55600 44000 55600 43800 4
P 56100 43300 56100 42800 1 0 0
{
T 56100 43300 5 10 0 0 0 0 1
pintype=unknown
T 56100 42745 5 10 1 1 90 6 1
pinlabel=p
T 56050 42895 5 10 1 1 90 0 1
pinnumber=0
T 56100 43300 5 10 0 0 0 0 1
pinseq=0
}
N 56500 43800 56500 43300 4
N 56500 43300 56100 43300 4
B 60300 41400 1800 300 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
C 49300 45700 1 0 0 output-2.sym
{
T 50200 45900 5 10 1 0 0 0 1
net=OUTPUT:1
T 49500 46400 5 10 0 0 0 0 1
device=none
T 50200 45800 5 10 1 1 0 1 1
value=H264(unpacketized)
}
B 45300 52200 2600 2400 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 46000 54100 9 10 1 0 0 0 2
R.pi remote
H264 encoder
C 47700 46000 1 0 0 4071-1.sym
{
T 48300 46700 5 10 0 1 0 0 1
device=4071
T 48050 46800 5 10 1 1 0 0 1
refdes=OR
T 48300 48100 5 10 0 0 0 0 1
footprint=DIP14
}
N 48900 46300 49300 45800 4
N 46000 47100 47700 47100 4
N 47700 46500 47700 47100 4
P 48800 52500 47900 52500 1 0 0
{
T 48800 52500 5 10 0 0 0 0 1
pintype=unknown
T 47845 52495 5 10 1 1 0 6 1
pinlabel=RTP/H264
T 47995 52545 5 10 1 1 0 0 1
pinnumber=0
T 48800 52500 5 10 0 0 0 0 1
pinseq=0
}
P 63700 41000 61500 41000 1 0 0
{
T 63700 41000 5 10 0 0 0 0 1
pintype=unknown
T 63545 41195 5 10 1 1 0 6 1
pinlabel=link(chunk1 & note1)
T 63700 41000 5 10 0 0 0 0 1
pinseq=0
}
N 61800 45600 63700 45600 4
N 63700 41000 63700 45600 4
B 57800 45900 3100 700 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
P 44000 53600 45300 53600 1 0 0
{
T 44000 53600 5 10 0 0 0 0 1
pintype=unknown
T 44255 53695 5 10 1 1 0 0 1
pinlabel=raw frames/mjpeg
T 44000 53600 5 10 0 0 0 0 1
pinseq=0
}
B 45900 54000 1500 600 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
C 46500 52900 1 0 0 resistor-2.sym
{
T 46900 53250 5 10 0 0 0 0 1
device=RESISTOR
T 45800 53300 5 10 1 1 0 0 1
refdes=OpenMAX/Broadcom H264 hardware encoder
}
L 45300 53600 46500 53000 3 0 0 0 -1 -1
L 47400 53000 47900 52500 3 0 0 0 -1 -1
B 57600 39200 6900 8100 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
B 62200 46000 2300 1300 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 62300 46900 9 10 1 0 0 0 1
Local DB and FS on Nettop
C 44700 49500 1 0 0 resistor-1.sym
{
T 45000 49900 5 10 0 0 0 0 1
device=RESISTOR
T 44900 49800 5 10 1 1 0 0 1
refdes=copy
}
N 44700 49600 44400 49500 4
N 45600 49600 45600 51300 4
N 44000 51300 45600 51300 4
N 44000 51300 44000 53600 4
C 45100 47000 1 0 0 resistor-1.sym
{
T 45400 47400 5 10 0 0 0 0 1
device=RESISTOR
T 45300 47300 5 10 1 1 0 0 1
refdes=copy
}
N 42300 47500 42300 47100 4
N 42300 47100 45100 47100 4
N 47700 46100 46200 46100 4
N 46200 46100 46200 51500 4
N 46200 51500 48800 51500 4
N 48800 51500 48800 52500 4
B 71600 39300 7000 8100 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
B 71600 46200 6500 1200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 72100 47000 9 10 1 0 0 0 1
Remote ZOG servers
B 71900 45100 3100 700 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 72000 44100 9 10 1 0 0 0 8
DataBase
 (Notifications, Cameras settings)

[Camera1]
note1 ... noteN +-- path to file 1..N

[CameraN]
noteN ... noteNN +-- path to file 2..M
B 72100 39800 2600 2400 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 72700 39800 9 10 1 0 0 0 11
BulkFrameStorage
[Camera1]
chunk11
...
chunk1N
[Camera N]
chunkN1
...
chunkNN


B 75600 42600 2700 2800 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 76000 42900 9 10 1 0 0 0 4
[Web Recorded video view]


[Web Online Stream View]
C 61000 42600 1 0 0 resistor-1.sym
{
T 61300 43000 5 10 0 0 0 0 1
device=RESISTOR
T 61200 42900 5 10 1 1 0 0 1
refdes=copy
}
B 66400 43400 4100 2100 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 66800 44100 9 10 1 0 0 0 5
ZOG trasmission protocol
& Message passing system (MQ)

+ 1 TCP connection for messages
+ Dynamic UDP ports for RTP/H264 data
P 65400 43700 66400 43700 1 0 0
{
T 65400 43700 5 10 0 0 0 0 1
pintype=unknown
T 65555 43895 5 10 1 1 0 0 1
pinlabel=H264 data
T 65400 43700 5 10 0 0 0 0 1
pinseq=0
}
N 57800 42500 61000 42500 4
N 61000 42500 61000 42700 4
N 61900 42700 65400 42700 4
N 65400 42700 65400 43700 4
P 65100 41800 62500 41800 1 0 0
{
T 65100 41800 5 10 0 0 0 0 1
pintype=unknown
T 64945 41895 5 10 1 1 0 6 1
pinlabel=SYNC OUT
T 62595 41845 5 10 1 1 0 0 1
pinnumber=0
T 65100 41800 5 10 0 0 0 0 1
pinseq=0
}
P 70600 42000 72100 42000 1 0 0
{
T 70600 42000 5 10 0 0 0 0 1
pintype=unknown
T 72155 41995 5 10 1 1 0 0 1
pinlabel=SYNC INPUT
T 72005 42045 5 10 1 1 0 6 1
pinnumber=0
T 70600 42000 5 10 0 0 0 0 1
pinseq=0
}
P 60200 48100 60200 46600 1 0 0
{
T 60100 49300 5 10 0 0 0 0 1
pintype=unknown
T 60100 47745 5 10 1 1 90 6 1
pinlabel=SYNC OUT
T 60050 47895 5 10 1 1 90 0 1
pinnumber=0
T 60100 49300 5 10 0 0 0 0 1
pinseq=0
}
P 70400 45800 72000 45800 1 0 0
{
T 70300 47000 5 10 0 0 0 0 1
pintype=unknown
T 71055 45995 5 10 1 1 0 0 1
pinlabel=SYNC INPUT
T 70300 47000 5 10 0 0 0 0 1
pinseq=0
}
C 66300 48300 1 0 0 diode-1.sym
{
T 66700 48900 5 10 0 0 0 0 1
device=DIODE
T 65900 48900 5 10 1 1 0 0 1
refdes=copy over ZOG protocol
}
C 67600 41700 1 0 0 diode-1.sym
{
T 68000 42300 5 10 0 0 0 0 1
device=DIODE
T 67200 42300 5 10 1 1 0 0 1
refdes=copy over ZOG protocol
}
N 60200 48100 60200 48500 4
N 60200 48500 66300 48500 4
N 67200 48500 70200 48500 4
N 70200 48500 70200 48600 4
N 70200 48600 70400 48600 4
N 70400 48600 70400 45800 4
N 65100 41800 67600 41800 4
N 67600 41800 67600 41900 4
N 68500 41900 70600 41900 4
N 70600 41900 70600 42000 4
B 65300 40900 5500 8400 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
C 73100 43100 1 0 0 resistor-1.sym
{
T 73400 43500 5 10 0 0 0 0 1
device=RESISTOR
T 73300 43400 5 10 1 1 0 0 1
refdes=copy
}
P 71400 43800 70500 43800 1 0 0
{
T 71400 43800 5 10 0 0 0 0 1
pintype=unknown
T 70445 43795 5 10 1 1 0 6 1
pinlabel=h264 data
T 71400 43800 5 10 0 0 0 0 1
pinseq=0
}
P 75100 43200 75800 43200 1 0 0
{
T 75100 43200 5 10 0 0 0 0 1
pintype=unknown
T 75855 43195 5 10 1 1 0 0 1
pinlabel=(h264->VLC plugin)
T 75705 43245 5 10 1 1 0 6 1
pinnumber=0
T 75100 43200 5 10 0 0 0 0 1
pinseq=0
}
N 71400 43800 73100 43800 4
N 73100 43800 73100 43200 4
N 74000 43200 75100 43200 4
B 75700 44500 2600 800 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 76500 44900 9 10 1 0 0 0 1
Frontend
B 66400 46800 2000 1000 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
T 68300 51400 9 10 1 0 0 0 2
Standalone R.PI
h264 camera + ZOG
B 68100 51200 1900 700 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1
P 69000 50200 69000 51200 1 0 0
{
T 69000 50200 5 10 0 0 0 0 1
pintype=unknown
T 70600 49855 5 10 1 1 90 0 1
pinlabel=H264 data + (Motion Detection Notices)
T 69000 50200 5 10 0 0 0 0 1
pinseq=0
}
P 69200 46900 69200 45500 1 0 0
{
T 69200 46900 5 10 0 0 0 0 1
pintype=unknown
T 69400 46645 5 10 1 1 90 6 1
pinlabel=direct usage
T 69200 46900 5 10 0 0 0 0 1
pinseq=0
}
N 69000 50200 69000 46900 4
N 69000 46900 69200 46900 4
C 38600 30200 0 0 0 title-bordered-A0.sym
